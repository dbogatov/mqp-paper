\chapter{Background and Related Work}

	The creation of a Metric Builder page and an API for the MATTERS site is a 
	result of two prior project groups and additional efforts by WPI students 
	who worked to establish the initial features and the design framework for 
	MATTERS to exist. The initial development of MATTERS came from a team of 
	students completing their Interactive Qualifying Project (IQP) with the 
	aid of other WPI graduate student teams. This team of IQP students researched 
	and came to the resulting decisions regarding the front-end visualization for 
	the MATTERS dashboard \cite{prevreport}. This includes the inclusion of decisions 
	regarding colors, and visualization types such as charts and tables, that would 
	be used to the represent the data within the system in a manner that was both 
	intuitive for the users and a quick way to show analytics. In parallel, 
	the graduate student teams worked to develop the back-end for MATTERS. 
	They made it possible to extract the data wanted from various sites and 
	then parse and clean this retrieved data, before then uploading it to a 
	database. This data would be called upon to be shown in the various visual 
	methods for the users \cite{iqp}.

	Following this initial front-end and back-end design and implementation 
	of the MATTERS dashboard, a team of students working on their Major Qualifying 
	Project (MQP) for WPI then worked to improve the administration center and the 
	data integration for the dashboard. This involved the data integration pipeline 
	manager as well as the Administration Center's development to allow for MHTC 
	and other administrators who had access to be able to easily upload their 
	desired data and metrics, as well as an easy way to view this data on the 
	administrative end. This MQP team was able to integrate 20 new data sources 
	for the MATTERS dashboard, make the Administration Center usable for 
	non-technical users, and improve upon the look and feel of the MATTERS 
	dashboard as a whole \cite{iqp}.

	\section{System Architecture}
	
		The MATTERS Website consists of two parts - \emph{admin panel} and \emph{dashboard}.
		While the \emph{admin panel} is used by administrators to work with data 
		(basic CRUD operations), in this project we focused on the \emph{dashboard} subsystem.
		This subsystem follows MVC (Model-View-Controller) architecture.
		
		\subsection{Model}
			
			System's data layer is built with the PostgreSQL database. The main tables are
			
			\begin{description}[itemsep=-1.5mm, align=right,labelwidth=3cm]
				\item [Statistics]
					holds metrics' data in a form of a year, state, metric and value tuple;
				\item [States]
					holds states' metadata like name, abbreviation and if it is a peer state;
				\item [Metrics]
					holds metrics' metadata like description, trend and category;							
			\end{description}
			
			The access to these tables is provided via stored procedures.
			
		\subsection{Controller}
		
			The business logic of the system resides on a Java-based server. Spring framework is 
			used as a server architecture solution. Front end request that comes to the system goes 
			through controllers which, in turn, invoke services. Services query data layer and return 
			data stored	in models. These data models get pushed back to the front end.
			
		\subsection{View}
			
			The presentation layer is represented by the HTML based website. Client side generates 
			queries to the server via JavaScript AJAX calls, then uses returned data to generate the content.
			Website has a significant amount of logic on the client side as it needs to build 
			tables, plots and charts. The two main JavaScript libraries used on the client side are jQuery and D3.
			jQuery makes it easy to manipulate DOM while D3 is used for generating vector based plots and charts.
			
			Visual representation is based on the responsive Twitter Bootstrap 3 framework 
			which is a collection of CSS classes and small JavaScript snippets. 

	\section{Requirements}

		The main goal of creating an API for MATTERS as well as creating the Metric 
		Builder page for the site and what it would entail, required looking into other 
		similar features of different sites and making decisions regarding implementation,
		design and security features for these aspects of the MATTERS site.

	\subsection{API and Documentation}

		An API is an Application Programming Interface. APIs are tools that allow other 
		programs to interact with the software program that the API belongs to without 
		having to give someone complete access to your code base. In a sense they expose 
		some of the internal workings of software to the public but in a way that is 
		limited by what the API chooses to provide. APIs aid in providing a way to share 
		a potentially large amount of data in an efficient way. According to the chief 
		data officer of Philadelphia, Mark Headd, APIs "allow a specific audience to use 
		data more quickly, easily, and efficiently when they are looking to do something 
		specific with the information." APIs are beneficial for not only keeping certain 
		aspects of code private, but also for saving users time. Even in cases of open 
		source programs where all of the code for a program is visible, the number of 
		code can be so large that it is inefficient to search through the whole code base 
		for specific data \cite{govapi}. 

		APIs will be beneficial from both a business aspect and for programs that aim share 
		information and research with many people. An advantage of an API being an automated 
		tool is that it can process a large number requests without any added cost and work 
		from the developers. APIs also present the data requested in a manner that is useful 
		and easily manipulated for the users' purposes. For APIs whose goals are to share 
		certain data across systems there is a great benefit efficiency wise, as many manual 
		procedures are cut out by the APIs automatic generation. When these tasks are done 
		manually, they waste time and are both laborious and repetitive, as well as being more 
		prone to error; all of these things being costly on the developer end. While it is more 
		time consuming and costly to develop an API initially, the overall benefit once it is 
		developed is very clear \cite{govapi}.

		Additionally, APIs not only encourage innovation and the ability to manipulate and 
		extrapolate data by external collaborators, they provide a means to do so that is 
		more secure for the group creating the API. They reduce the risk of how and what data 
		is obtains and encourage good practice for how to properly manage the data 
		available \cite{readwrite}.

	One important step to gaining the full benefits from an API is making sure that the API is 
	secure. This can be achieved through requiring authentication and authorization of users 
	before they gain access to the API's features. It is good practice to ensure that the users 
	are who they say they are and that they are given permission before using data or parts of 
	a developer's program. This also allows for a record of who exactly is accessing the data, 
	in the event that there is an issue so that a specific user can be tracked down \cite{jisc}.

	In addition to creating the API for a site, it is necessary to create good documentation to 
	accompany the API, to make the API as user friendly and simplistic as possible. 
	API Documentation provides developers with everything that they need to know in a concise 
	manner in order to use the APIâ€™s features with other applications. The API Documentation 
	needs to contain the classes, functions and other important aspects of the API \cite{cio}. 
	The documentation guide allows developers to easily interact with a site's API and their 
	own code, as many developers style their code in their own unique way. 

	\subsection{Metric Builder}

		The main feature that is to be developed is the Metric Builder page which will be available 
		for the registered users on the MATTERS website only. A user will be able to select any 
		number of the metrics already available in the MATTERS database and combine their data to 
		create their own personal formula or indicator. The user can then use their created formula 
		to display the states' rankings based on this indicator. This will allow users to see and 
		evaluate states based on what they think is most important as a whole or combination of 
		various factors, and interpret the data in their own way, simply. By allowing users to 
		create their own data set from all the metrics available and then provide their own weights 
		to each of these data values, we are allowing users to see the value that each state has 
		based on how important they find a large number of metrics.

		It is important to ensure that many different data types are able to be combined to create 
		one final value. It is also important to consider the effects that certain data types will 
		have on the final value received from the user's indicator. For example, the MATTERS database 
		contains rankings, percentages, nominal values, and other data types. Certain data types could 
		end up dominating in a user created indicator when combined with significantly smaller value 
		data types. There are also complexities involved with certain data types that are represented in 
		the reverse of the majority of the data types. For example, both rankings and some other data 
		types use numerical values in which a lower value indicates a better performance by the state, 
		versus the majority of other metrics in which the larger the value is, the better a state is 
		performing in that area. 

		Finally, there are many metrics that do not contain a value for every single year that other 
		metrics contain. Situations where one metric being used in the user's Metric Builder equation
		does not contain values for years that another metric being used in the same equation need to be 
		considered. There needs to be a uniform solution for what to do in these instances in a way that 
		does not deceive the users of the indicator, as this would affect the calculations and following 
		visualizations across years where these issues exist.

		These factors need to be taken into consideration in order to provide accurate and understandable 
		visualizations and results when users create their own indicator in the Metric Builder. It is for 
		this reason good to consider special handling or removal of certain data types, as well as potential 
		ways to normalize the final numerical values received from the formulas the users have created in 
		the Metric Builder.

		We looked at various economic indicators to come up with an idea for how to allow our users to 
		combine sets of data to use for comparisons. One common approach in economic indicators is to use 
		weighted averages \cite{weightedaverage}. For example, one of the most popular economic indicators, 
		CPI, or the Consumer Price Index, uses weighted averages of data from hundreds of different consumer 
		goods and services to measure inflation and deflation. Each of the goods considered by the CPI is 
		weighted based on its importance \cite{cpi}.

		Weighted averages work by taking each number in a given data set, and multiplying the value by 
		its given weight. This will give you a new value reflecting the product of the data and its weight. 
		Add all of these products together from the data set to get the total value. Then, add up the total 
		of all the weights. Finally divide the total value by the total weight in order to receive the weighted 
		average of your data set. The weights are used to show the importance that each specific item in a 
		data set has in order to calculate an overall value of all the data together \cite{economic}.
